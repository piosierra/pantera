#!/bin/bash

grep "LINE" -A 1 --no-group-separator $1 > lines
wc -l lines | awk '{print $1}' > complete_lines
getorf -minsize 1000 -sequence lines -outseq linesorfs
awk '/^>/{if (l!="") print l; print; l=0; next}{l+=length($0)}END{print l}' linesorfs   | \
 tr '\n' ' ' | sed 's/>/\n>/g' | sed 's/_[[:digit:]]\+//g' | sed 's/(.*) //g' | \
 sed 's/\[.*\] //g' | sort -n -k 2 | awk 'a[$1]++{print}' | awk '$2> 1200 {count++} END{print count}' >> complete_lines
rm lines
rm linesorfs

